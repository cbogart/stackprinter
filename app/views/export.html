$def with (service, post, pretty_links, printer, link_to_home)
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<link rel="stylesheet" href="/stylesheets/export.css">
		<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
		<title>$post.question['title']</title>
		<script type="text/javascript" src="/javascripts/jquery-1.4.2.min.js"></script>
		<script type="text/javascript" src="/javascripts/main.js"></script>
		$if service in TEX_ENABLED_SERVICES:
		    <script type="text/javascript" src="http://mathjax.connectmv.com/MathJax.js">
		            MathJax.Hub.Config({extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/noUndefined.js", "TeX/AMSsymbols.js"],"HTML-CSS": { preferredFont: "TeX", imageFont: null, availableFonts: ["STIX","TeX"], webFont: "TeX" },jax: ["input/TeX","output/HTML-CSS"],TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } }});MathJax.Hub.Startup.onload();
		    </script>
		    $if printer:
		        <script>
		            MathJax.Hub.Queue(["Delay",MathJax.Callback,700],Print)
		        </script>
		$else:
		    $if printer:
		        <script>
		            jQuery(document).ready(function(){Print();});
                </script>
    </head>
	<body>
	    <div id="home">
	        $if link_to_home:
	            <a href="/"><img title="Back to home" width="20px" height="20px" border="0" src="/images/icon_home.png"/></a>
	        <a href="http://www.stackprinter.com/export?format=HTML&service=$service&printer=false&question=$(post.question['question_id'])"><img title="Link to this printed question" width="20px" height="20px" border="0" src="/images/Share.gif"/></a>
	    </div>
	    <div id="donate">
	        <p style="margin-bottom:3px;">App Engine <a class="link" href="http://groups.google.com/group/google-appengine/browse_frm/thread/a1b7c68db2243932/e70dab7082473730?pli=1">hosting</a> help</p>
	        <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
            <input type="hidden" name="cmd" value="_s-xclick">
            <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
            ">
            <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
            <img alt="" border="0" src="https://www.paypalobjects.com/it_IT/i/scr/pixel.gif" width="1" height="1">
            </form>
            
	    </div>         
        <div id="question-block">
          <div id="question-title">
          	 <img src="$(supported_services.info[service]['icon_url'])"/>$htmlquote(post.question['title'])<br>
          </div>
          <div id="question-details">
                [$(['','+'][(int(post.question['up_vote_count'])-int(post.question['down_vote_count']))>0])$(int(post.question['up_vote_count'])-int(post.question['down_vote_count']))] [$post.question['answer_count']]
            	 $post.question.get('owner', {'display_name':'community_owned'})['display_name'] 
          </div>
          <div id="question-details">
              [$date_from(float(post.question['creation_date']))]
          </div>
          <div id="question-details">
          [
          $for tag in post.question['tags']:
              $tag
          ]
          </div>
          <div id="question-details">
          [ http://$(service).com/questions/$(post.question['question_id'])]
          $if post.is_deleted():
              [DELETED]
          </div>
          <div id="question">
          $if pretty_links:
              $code:
                  (sup_question_body,sup_question_links) = suppify_body(post.question['body'])
              $sup_question_body
              <div id="question-links">
              $for key in sup_question_links.keys():
                  [$(key)] $(sup_question_links[key])<br>
              </div>
          $else:
              $post.question['body']
          </div>
          	$for comment in post.question['comments']:
                <div class="comment">
                    $if int(comment['score']) > 0:
                        ($comment['score'])    
                    $comment['body'] - <b> $comment.get('owner', {'display_name':'community_owned'})['display_name']</b>                   
                </div>
            $if service not in TEX_ENABLED_SERVICES:    
                <div id="adsense">
                        <script type="text/javascript"><!--
                        google_ad_client = "pub-3296756901484166";
                        /* 728x90, created 9/8/11 */
                        google_ad_slot = "7129208720";
                        google_ad_width = 728;
                        google_ad_height = 90;
                        //-->
                        </script>
                        <script type="text/javascript"
                        src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                        </script>
                </div>
              $for answer_number, answer  in enumerate(post.answers):
                  <div class="answer-details">
                      [$(['','+'][(int(answer['up_vote_count'])-int(answer['down_vote_count']))>0])$(int(answer['up_vote_count'])-int(answer['down_vote_count']))]
                      [$date_from(float(answer['creation_date']))]     
                      $answer.get('owner', {'display_name':'community_owned'})['display_name']
                      $if bool(answer['accepted']):
                          [<img  height="17px" width="17px" src="/images/blackflag.png"/>ACCEPTED]
                  </div>
                  <div class="answer">
                    $if pretty_links:  
                        $code:
                            (sup_answer_body,sup_answer_links) = suppify_body(answer['body'])
                        $sup_answer_body  
                        $for key in sup_answer_links.keys():
                            [$(key)] $(sup_answer_links[key])<br>
                        <br>
                    $else:
                        $answer['body']
                  </div>
                  $for comment in answer['comments']:
                      <div class="comment">
                      $if int(comment['score']) > 0:
                           ($comment['score'])    
                      $comment['body'] - <b> $comment.get('owner',{'display_name':'community_owned'})['display_name']</b>     
                      </div>
                  <div class="answer-pagenumber">$int(answer_number+1)</div>
      </div>
        <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
        </script>
        <script type="text/javascript">
            try {
                var pageTracker = _gat._getTracker("UA-4276204-5");
                pageTracker._trackPageview();
            } catch(err) {}
        </script>
	    <script src="http://static.getclicky.com/js" type="text/javascript"></script>
        <script type="text/javascript">clicky.init(250663);</script>
        <noscript><p><img alt="Clicky" width="1" height="1" src="http://in.getclicky.com/250663ns.gif" /></p></noscript>
  </body>
</html>